#!/usr/bin/env ruby
$LOAD_PATH.unshift(File.expand_path('../../lib', __FILE__))
require 'bundler/setup'
require 'commander/import'

require 'flabbergast'

program :name,        'Flabbergast'
program :version,     '0.0.1'
program :description, 'Generate and solve word grid puzzles'

command :run do |c|
  c.syntax = '[options]'
  c.option '--size NUMBER',  Integer, 'Number letters in each direction on the grid'
  c.option '--file path',  String, 'Path to a grid to solve'
  c.option '--dictionary path',  String, 'Path to a word dictionary'

  c.action do |args, options|
    options.default(
      size: 4,
      dictionary_file: File.expand_path('../../dictionary.txt', __FILE__)
    )

    grid = Flabbergast::Grid.new(options)
    grid.solve!

    puts grid
    puts "There were #{grid.words.count} words found."
    grid.words.each { |word| puts word }

  end
end

default_command :run
